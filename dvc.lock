schema: '2.0'
stages:
  download-ruwiki:
    cmd: scripts/download_russian_wiki_dump.sh
    outs:
    - path: data/ruwiki-latest-pages-articles.xml.bz2
      md5: 01bed521f67bedf76fd561377bd3c3ec
      size: 4996155242
  download-eyo-dicts:
    cmd: scripts/download_eyo_kernel_dicts.sh
    outs:
    - path: data/not-safe.txt
      md5: b840d675d69f7b37659a5950194bc629
      size: 242758
    - path: data/safe.txt
      md5: a0c4cb74b6dd0a97fd8f1c78495028dc
      size: 864955
  extract-segments-from-wiki:
    cmd: python -m scripts.extract_segments_from_wiki -n 1000000
    deps:
    - path: data/ruwiki-latest-pages-articles.xml.bz2
      md5: 01bed521f67bedf76fd561377bd3c3ec
      size: 4996155242
    outs:
    - path: data/ruwiki-yo-segments.txt
      md5: 87032f5eacca355e6300ff6414ebaef9
      size: 325853908
  prepare-segments-dataset:
    cmd: python -m scripts.prepare_segments_dataset --max-text-length 220
    deps:
    - path: data/ruwiki-yo-segments.txt
      md5: 87032f5eacca355e6300ff6414ebaef9
      size: 325853908
    outs:
    - path: data/ruwiki-yo-segments-preprocessed.csv
      md5: 390ed035c78ec301c4dddc873dede7cd
      size: 293989965
  split-dataset:
    cmd: python -m scripts.split_dataset
    deps:
    - path: data/ruwiki-yo-segments-preprocessed.csv
      md5: 390ed035c78ec301c4dddc873dede7cd
      size: 293989965
    outs:
    - path: data/test.csv
      md5: 953c148175a3ca1dff6efd51aed6bf23
      size: 73802280
    - path: data/train.csv
      md5: 00502eb10c1e9e35b89f1c04d32f099b
      size: 221436923
